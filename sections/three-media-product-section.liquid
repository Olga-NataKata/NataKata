<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
<link rel="stylesheet" href="{{ 'component-media-slider.css' | asset_url }}" media="print" onload="this.media='all'">
{% schema %}
  {
    "name": "Media Slider Section",
    "settings": [
      {
        "type": "text",
        "id": "section_text",
        "label": "Section Text"
      }
    ],
    "blocks": [
      {
        "type": "media",
        "name": "Media Item",
        "settings": [
          {
            "type": "select",
            "id": "media_type",
            "options": [
              { "value": "image", "label": "Image" },
              { "value": "video", "label": "Video" }
            ],
            "default": "image",
            "label": "Media Type"
          },
          {
            "type": "image_picker",
            "id": "media_image1",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "image_picker",
            "id": "media_image2",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "image_picker",
            "id": "media_image3",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "url",
            "id": "media_video",
            "label": "Video URL",
            "info": "Enter a video URL if media type is video."
          },
          {
            "type": "text",
            "id": "media_text",
            "label": "Media Text"
          },
          {
            "type": "text",
            "id": "media_description",
            "label": "Media Description"
          },
          {
            "type": "select",
            "id": "text_position",
            "options": [
              { "value": "left", "label": "Left" },
              { "value": "center", "label": "Center" },
              { "value": "right", "label": "Right" }
            ],
            "default": "left",
            "label": "Text Position"
          },
          {
            "type": "product",
            "id": "media_product",
            "label": "Linked Product",
            "info": "Select a product to link with this media item."
          }
        ],
        "limit": 3
      }
    ],
    "presets": [{ "name": "Media Slider Section" }]
  }
  {% endschema %}  
  
<div class="three-media-container">
{%- for block in section.blocks -%}
  <div class="three-media-item {% if forloop.index == 1 %}three-media1{% elsif forloop.index == 2 %}three-media2{% else %}three-media3{% endif %}">
    {%- if block.settings.media_type == 'image' -%}
      <div class="swiper-container">
        <div class="swiper-wrapper">
          {%- if block.settings.media_product != blank -%}
            {%- if block.settings.media_image1 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image1 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
            {%- if block.settings.media_image2 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image2 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
            {%- if block.settings.media_image3 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image3 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
          {%- else -%}
            {%- if block.settings.media_image1 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image1 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
            {%- if block.settings.media_image2 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image2 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
            {%- if block.settings.media_image3 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image3 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
          {%- endif -%}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    {%- endif -%}
    {%- if block.settings.media_type == 'video' -%}
      {%- if block.settings.media_video != blank -%}
        {{ block.settings.media_video | video_tag: autoplay: true, loop: true, controls: false, muted: true }}
      {%- endif -%}
    {%- endif -%}
    <div class="three-media-text {{ block.settings.text_position }}">
      <h3>{{ block.settings.media_text }}</h3>
      <p>{{ block.settings.media_description }}</p>
    </div>
  </div>
{%- endfor -%}
</div>


<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<script>
  var swiper = new Swiper('.swiper-container', {

    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    
  });

</script>
