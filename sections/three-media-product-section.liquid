{% schema %}
  {
    "name": "Media Slider Section",
    "settings": [
      {
        "type": "text",
        "id": "section_text",
        "label": "Section Text"
      }
    ],
    "blocks": [
      {
        "type": "media",
        "name": "Media Item",
        "settings": [
          {
            "type": "select",
            "id": "media_type",
            "options": [
              { "value": "image", "label": "Image" },
              { "value": "video", "label": "Video" }
            ],
            "default": "image",
            "label": "Media Type"
          },
          {
            "type": "image_picker",
            "id": "media_image1",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "image_picker",
            "id": "media_image2",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "image_picker",
            "id": "media_image3",
            "label": "Image",
            "info": "Select an image if media type is image."
          },
          {
            "type": "url",
            "id": "media_video",
            "label": "Video URL",
            "info": "Enter a video URL if media type is video."
          },
          {
            "type": "text",
            "id": "media_text",
            "label": "Media Text"
          },
          {
            "type": "text",
            "id": "media_description",
            "label": "Media Description"
          },
          {
            "type": "select",
            "id": "text_position",
            "options": [
              { "value": "left", "label": "Left" },
              { "value": "center", "label": "Center" },
              { "value": "right", "label": "Right" }
            ],
            "default": "left",
            "label": "Text Position"
          },
          {
            "type": "product",
            "id": "media_product",
            "label": "Linked Product",
            "info": "Select a product to link with this media item."
          }
        ],
        "limit": 3
      }
    ],
    "presets": [{ "name": "Media Slider Section" }]
  }
  {% endschema %}  
  
<div class="three-media-container">
{%- for block in section.blocks -%}
  <div class="three-media-item {% if forloop.index == 1 %}three-media1{% elsif forloop.index == 2 %}three-media2{% else %}three-media3{% endif %}">
    {%- if block.settings.media_type == 'image' -%}
      <div class="swiper-container">
        <div class="swiper-wrapper">
          {%- if block.settings.media_product != blank -%}
            {%- if block.settings.media_image1 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image1 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
            {%- if block.settings.media_image2 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image2 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
            {%- if block.settings.media_image3 != blank -%}
              <div class="swiper-slide">
                <a href="{{ block.settings.media_product.url }}">
                  <img src="{{ block.settings.media_image3 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
                </a>
              </div>
            {%- endif -%}
          {%- else -%}
            {%- if block.settings.media_image1 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image1 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
            {%- if block.settings.media_image2 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image2 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
            {%- if block.settings.media_image3 != blank -%}
              <div class="swiper-slide">
                <img src="{{ block.settings.media_image3 | image_url: width: 1920 }}" width="1920" height="auto" alt="{{ block.settings.media_text }}">
              </div>
            {%- endif -%}
          {%- endif -%}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    {%- endif -%}
    {%- if block.settings.media_type == 'video' -%}
      {%- if block.settings.media_video != blank -%}
        {{ block.settings.media_video | video_tag: autoplay: true, loop: true, controls: false, muted: true }}
      {%- endif -%}
    {%- endif -%}
    <div class="three-media-text {{ block.settings.text_position }}">
      <h3>{{ block.settings.media_text }}</h3>
      <p>{{ block.settings.media_description }}</p>
    </div>
  </div>
{%- endfor -%}
</div>

<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> 
<style>
  .three-media-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 20px;
  }

  .three-media-item {
    position: relative;
  }

  .three-media-item img {
    width: 100%;
    height: auto;
  }

  .three-media1 {
    grid-column: span 6; /* займає весь ряд */
    grid-row: span 2;    /* займає два ряди */
    aspect-ratio: 2 / 1; /* співвідношення сторін */
  }

  .three-media2, .three-media3 {
    grid-column: span 3;  /* займає половину колонки */
    grid-row: span 3;     /* займає три ряди */
    aspect-ratio: 1 / 1;   /* квадратне співвідношення */
  }

  .three-media1 .three-media-text h3 {
    font-size: 40px;
  }

  .three-media1 .three-media-text p {
    font-size: 20px;
  }

  .three-media2 .three-media-text h3,
  .three-media3 .three-media-text h3 {
    font-size: 32px;
  }

  .three-media2 .three-media-text p,
  .three-media3 .three-media-text p {
    font-size: 16px;
  }
  
  .three-media-text {
    position: absolute;
    color: #fff;
    z-index: 1;
    padding: 0 100px 0 100px;
  }

  .three-media-text h3 {;
    margin: 0;
    color: #fff;
  }

  .three-media-text p {
    line-height: 1.5;
    margin: 0;
    color: #fff;
  }

  .left {
    left: 10px;
    top: 50%;
  }

  .right {
    right: 10px;
    top: 50%;
  }

  .center {
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }

  .swiper-container {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .swiper-slide {
    text-align: center;
    font-size: 18px;
    background: #fff;  
  }

  .swiper-button-prev, .swiper-button-next {
    display: flex !important; 
    justify-content: center; 
    align-items: center; 
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px; 
    height: 40px; 
    color: #fff;
    margin: 0; 
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s;
  }

  
  .swiper-button-next::after,
  .swiper-button-prev::after {
    font-size: 24px; 
  }


  .swiper-button-disabled {
    opacity: 0 !important;
  }

  .swiper-pagination {
    opacity: 0;
    transition: opacity 0.3s;
    gap: 24px;
    z-index: 1;
  }

  .swiper-pagination-bullet {
    width: 10px;
    height: 10px;
    margin: 32px!important;
    
  }

  .swiper-pagination-bullet-active {
    background-color: #fff !important;
  }

  /* Optional: Adjust the position of prev and next arrows */
  .swiper-button-prev {
    left: 10px;
  }

  .swiper-button-next {
    right: 10px;
  }

  /* Show buttons when hovering over the Swiper container */
  .swiper-container:hover .swiper-button-prev,
  .swiper-container:hover .swiper-button-next,
  .swiper-container:hover .swiper-pagination,
  .swiper-container:hover .swiper-button-disabled {
    opacity: 1 !important;
  }
</style>

<script>
  var swiper = new Swiper('.swiper-container', {

    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    
  });

</script>
